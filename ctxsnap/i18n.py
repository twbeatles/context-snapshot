import locale
from typing import Optional

# Global translation dictionary
TRANSLATIONS = {
    "en": {
        "New Snapshot": "New Snapshot",
        "Edit Snapshot": "Edit Snapshot",
        "Select folder": "Select folder",
        "Select VSCode workspace": "Select VSCode workspace",
        "Workspace placeholder": "Optional: .code-workspace file (used for restore)",
        "Select Workspace": "Select Workspace",
        "Title placeholder": "Title (auto-generated if empty)",
        "Note placeholder": "Note (optional)",
        "Tags (optional)": "Tags (optional)",
        "Add tag placeholder": "Add tag (press Enter)",
        "Next actions (3 required)": "Next actions (3 required)",
        "Required TODO": "Required TODO",
        "Template": "Template",
        "Select template": "Select template",
        "Apply": "Apply",
        "Suggest Title": "Suggest Title",
        "Save Snapshot": "Save Snapshot",
        "Cancel": "Cancel",
        "Root invalid": "Root folder is invalid.",
        "Todos required": "All 3 TODOs are required.",
        "Restore preview": "Restore preview",
        "Restore hint": "The following items will be opened. Check and press Restore.",
        "Open folder": "Open folder",
        "Open terminal": "Open terminal (cd root)",
        "Open VSCode": "Open VSCode at root",
        "Open running apps": "Open running apps (taskbar)",
        "Running apps to restore": "Running apps to restore",
        "Restore": "Restore",
        "Checklist": "Checklist",
        "Post-restore checklist": "Post-restore checklist",
        "OK": "OK",
        "Restore History": "Restore History",
        "Close": "Close",
        "Compare Snapshots": "Compare Snapshots",
        "Compare two snapshots": "Compare two snapshots",
        "Compare": "Compare",
        "Need at least two snapshots to compare": "Need at least two snapshots to compare.",
        "Settings": "Settings",
        "General": "General",
        "Default Root": "Default Root",
        "Browse": "Browse",
        "Snapshot Retention": "Snapshot Retention",
        "Keep max snapshots (0=unlimited)": "Keep max snapshots (0=unlimited)",
        "Auto-snapshot": "Auto-snapshot",
        "Interval (minutes, 0=disabled)": "Interval (minutes, 0=disabled)",
        "Trigger on Git commit": "Trigger on Git commit",
        "Global Hotkey": "Global Hotkey",
        "Enable Hotkey": "Enable Hotkey",
        "Recent Files Scan": "Recent Files Scan",
        "Scan limit": "Scan limit",
        "Exclude dirs (comma-separated)": "Exclude dirs (comma-separated)",
        "Restore Defaults": "Restore Defaults",
        "Open folder on restore": "Open folder on restore",
        "Open terminal on restore": "Open terminal on restore",
        "Open VSCode on restore": "Open VSCode on restore",
        "Restore apps on restore": "Restore apps on restore",
        "Process Keywords": "Process Keywords",
        "Keywords to identify running apps (comma-separated)": "Keywords to identify running apps (comma-separated)",
        "Save": "Save",
        "Onboarding": "Onboarding",
        "Welcome to CtxSnap": "Welcome to CtxSnap",
        "Onboarding header": "The fastest way to save and restore your work context.",
        "Onboarding p1 title": "1) Capture (Snapshot)",
        "Onboarding p1 body": "<p><b>Snapshot</b> saves your current work state.</p><ul><li><b>New Snapshot</b>: Create with title, note, tags, and TODOs.</li><li><b>Quick Snapshot</b>: Save instantly (Default: <b>Ctrl+Alt+S</b>).</li></ul><p>Writing <b>3 TODOs</b> helps you know exactly where to start next time.</p>",
        "Onboarding p2 title": "2) Resume (Restore)",
        "Onboarding p2 body": "<p><b>Restore</b> opens your saved context.</p><ul><li>Opens folder, terminal, and VSCode.</li><li>Reviews actions in <b>Preview</b> before launching.</li></ul><p>Ensure <code>code</code> is in your PATH for VSCode support.</p>",
        "Onboarding p3 title": "3) Organize (Tags & Pin)",
        "Onboarding p3 body": "<p>Use tags to organize by project or domain (e.g., Work, Personal).</p><ul><li><b>Filter</b> by tags to find snapshots quickly.</li><li><b>Pin</b> important snapshots to the top.</li></ul>",
        "Onboarding p4 title": "4) Settings & Backup",
        "Onboarding p4 body": "<p>Customize your experience in <b>Settings</b>:</p><ul><li>Change Global Hotkey</li><li>Adjust restore defaults</li><li>Manage backups (Import/Export)</li></ul><p>Access Quick Snapshot from the system tray.</p>",
        "Got it": "Got it",
        "Back": "Back",
        "Next": "Next",
        "Finish": "Finish",
        "Quick Information": "Quick Information",
        "Delete": "Delete",
        "Edit": "Edit",
        "Toggle Pin": "Toggle Pin",
        "Archive/Unarchive": "Archive/Unarchive",
        "View History": "View History",
        "Export Backup": "Export Backup",
        "Import Backup": "Import Backup",
        "Quick Snapshot": "Quick Snapshot",
        "Restore Last": "Restore Last",
        "Open App Folder": "Open App Folder",
        "Show/Hide": "Show/Hide",
        "Quit": "Quit",
        "Confirm Delete": "Confirm Delete",
        "Are you sure you want to delete this snapshot?": "Are you sure you want to delete this snapshot?",
        "Snapshot Created": "Snapshot Created",
        "Snapshot Restored": "Snapshot Restored",
        "Deleted": "Deleted.",
        "Hotkey disabled": "Hotkey disabled.",
        "Hotkey enabled": "Hotkey enabled",
        "Hotkey failed": "Hotkey registration failed (maybe already in use).",
        "Hotkey conflict": "Hotkey conflict",
        "Hotkey conflict msg": "Could not register global hotkey (maybe used by another app).",
        "Hotkey conflict info": "You can try alternatives or disable it.",
        "Try alternatives": "Try alternatives",
        "Disable hotkey": "Disable hotkey",
        "Keep as is": "Keep as is",
        "Confirm Restore": "Confirm Restore",
        "Current workspace is not clean (git changes). Restore anyway?": "Current workspace is not clean (git changes). Restore anyway?",
        "Search placeholder": "Search title, tag, or path... (Ctrl+F)",
        "No snapshots found": "No snapshots found.",
        "Create your first snapshot!": "Create your first snapshot!",
        "Untitled": "Untitled",
        "Language": "Language",
        "Language (Requires Restart)": "Language (Requires Restart)",
        "System Default": "System Default",
        "File": "File",
        "Tools": "Tools",
        "Help": "Help",
        "About": "About",
        "About CtxSnap": "About CtxSnap",
        "About content": "CtxSnap\n\nWork Context Snapshot Tool (Windows)\n- Save/Restore Snapshots\n- Tag/Pin Filters\n- Global Hotkey\n- Settings Import/Export\n",
        "Export Selected Snapshot": "Export Selected Snapshot...",
        "Export Weekly Report": "Export Weekly Report...",
        "Open Restore History": "Open Restore History",
        "Pin / Unpin": "Pin / Unpin",
        "Open Root Folder": "Open Root Folder",
        "Open in VSCode": "Open in VSCode",
        "More": "More",
        "Overview": "Overview",
        "Recent files": "Recent files",
        "Processes": "Processes",
        "Running apps": "Running apps",
        "Recent files tab hint": "Tip: Double-click to open a file. Right-click for more actions.",
        "Clear": "Clear",
        "Tags": "Tags",
        "All tags": "All tags",
        "Copied": "Copied.",
        "Copy title": "Copy title",
        "Copy root path": "Copy root path",
        "Copy TODOs": "Copy TODOs",
        "TODOs": "TODOs",
        "Path": "Path",
        "Copy path": "Copy path",
        "Open file": "Open file",
        "Open file failed": "Open failed",
        "Open containing folder": "Open containing folder",
        "File not found": "File not found",
        "Prev": "Prev",
        "No snapshot selected": "No snapshot selected",
        "Select a snapshot to see details.": "Select a snapshot to see details.",
        "Storage:": "Storage:",
        "Still running in tray title": "CtxSnap",
        "Still running in tray msg": "Still running in the system tray. Use the tray icon to Show/Hide or Quit.",
        "Snapshot saved": "Snapshot saved",
        "Pinned.": "Pinned.",
        "Unpinned.": "Unpinned.",
        "Archived.": "Archived.",
        "Unarchived.": "Unarchived.",
        "Settings applied.": "Settings applied.",
        "Auto backup created": "Auto backup created",
        "Hotkey updated to": "Hotkey updated to",
        "All time": "All time",
        "Last 1 day": "Last 1 day",
        "Last 3 days": "Last 3 days",
        "Last 7 days": "Last 7 days",
        "Last 30 days": "Last 30 days",
        "Newest": "Newest",
        "Oldest": "Oldest",
        "Pinned first": "Pinned first",
        "Title": "Title",
        "Pinned only": "Pinned only",
        "Show archived": "Show archived",
        "Wait 2s": "Wait 2s",
        "Wait 1s": "Wait 1s",
        "Tips": "Tips",
        "Hotkey Hint": "Tip: <b>Ctrl+Alt+S</b> (Quick Snapshot) — Save your context anytime.",
        "Restore Preview Hint": "Restore runs after checking items in <b>Preview</b>. You can disable preview default in settings.",
        "Recent Files Hint": "Recent files help recall 'where was I?'. Too many files might slow down scanning.",
        "Privacy Hint": "Snapshots store paths and running apps. Capture only what you need.",
        "Tags Hint": "Tags like 'Work/Personal' are key for organizing contexts.",
        "Backup Hint": "Backup Settings/Tags/Hotkeys, and optionally Snapshots to a single file.",
        "Import Dialog Title": "Import",
        "Import Dialog Text": "Backup loaded. Apply now?",
        "Import Dialog Info": "Apply now: Update UI/Hotkey/Tags immediately.\nKeep: Review in dialog then Save.",
        "Apply now": "Apply now",
        "Keep in dialog": "Keep in dialog",
        "Reset to defaults": "Reset to defaults",
        "Reset to defaults msg": "Reset to defaults.",
        "Export failed": "Export failed",
        "Import failed": "Import failed",
        "Validation Error": "Validation Error",
        "Hotkey selection err": "Select at least one modifier (Ctrl/Alt/Shift) to enable hotkey.",
        "Onboarding...": "Onboarding...",
        "Snapshot exported": "Snapshot exported.",
        "Weekly report exported": "Weekly report exported.",
        "No restore history yet": "No restore history yet.",
        "Snapshot file missing": "Snapshot file missing.",
        "Restore failed for some items:": "Restore failed for some items:",
        "Recent files updated in background.": "Recent files updated in background.",
        "Warning": "Warning",
        "Error": "Error",
        "Information": "Information",
        "Snapshot Updated": "Snapshot Updated",
        "Failed to restore some apps": "Failed to restore some apps",
        "Failed to delete snapshot file": "Failed to delete snapshot file",
        "Imported snapshot warning title": "Imported snapshot",
        "Imported snapshot warning msg": "This snapshot was imported. Restoring apps may execute programs/commands from the snapshot. Proceed only if you trust it.",
        "Proceed": "Proceed",
        "Skipped app restore for imported snapshot": "Skipped app restore for imported snapshot.",
        "Enforce 3 TODOs": "Enforce 3 TODOs",
        "Add": "Add",
        "Add / Update": "Add / Update",
        "Template TODO": "Template TODO",
        "Include patterns for recent file scan": "Include patterns for recent file scan",
        "Exclude patterns for recent file scan": "Exclude patterns for recent file scan",
        "Snapshot list page size": "Snapshot list page size",
        "Auto-archive after": "Auto-archive after",
        "Auto backup interval": "Auto backup interval",
        "Skip pinned snapshots when auto-archiving": "Skip pinned snapshots when auto-archiving",
        "Duplicate Snapshot": "Duplicate Snapshot",
        "Duplicate snapshot warn": "Same title and path already exists. Create anyway?",
        "Restore open folder failed": "Folder open failed:",
        "Restore open terminal failed": "Terminal open failed:",
        "Restore open vscode failed": "VSCode open failed:",
        "Delete snapshot?": "Delete snapshot?",
        "Delete confirm msg": "Really delete? Snapshot file will also be deleted.",
        "VSCode not found title": "VSCode not found",
        "VSCode command missing": "'code' command not found. Install 'code' command in PATH via VSCode Command Palette.",
        "Settings Hint": "Manage hotkeys, restore behavior, and tags. Backup/Restore supported.",
        "Show post-restore checklist": "Show post-restore checklist",
        "Show restore preview by default": "Show restore preview by default",
        "Backup / Restore": "Backup / Restore",
        "Include settings": "Include settings",
        "Include index": "Include index (list/pin/tag metadata)",
        "Include snapshots": "Include snapshots (full JSON)",
        "Export options group": "Export options",
        "Import Params": "Backup loaded. Apply now?",
        "Import Info": "Apply now: Update UI/Hotkey/Tags immediately.\nKeep: Review in dialog then Save.",
        "Exported": "Exported: ",
        "Imported+Applied": "Imported+Applied: ",
        "Imported into dialog": "Imported into dialog: ",
        "Reset to defaults done": "Reset to defaults.",
        "suffix_files": " files",
        "suffix_sec": " sec",
        "suffix_per_page": " per page",
        "suffix_min": " min",
        "suffix_days": " days",
        "suffix_hours": " hours",
        "Root": "Root",
        "Workspace": "Workspace",
        "Note": "Note",
        "Restore Options": "Restore Options",
        "Checklist hint": "Check off items as you complete them.",
        "Done": "Done",
        "Snapshot details": "Snapshot details",
        "Select a restore entry to view details.": "Select a restore entry to view details.",
        "Check off completed items": "Check off completed items",
        "Capture recent files": "Capture recent files",
        "Capture running processes": "Capture running processes",
        "Capture note": "Capture note",
        "Capture TODOs": "Capture TODOs",
        "Capture Options": "Capture Options",
        "Files to collect": "Files to collect",
        "Scan timeout": "Scan timeout",
        "Automation": "Automation",
        "Archive & Backup": "Archive & Backup",
        "Root folder": "Root folder",
        "Suggest title": "Suggest title",
        "TODOs required": "All 3 TODOs are required.",
    },
    "ko": {
        "New Snapshot": "새 스냅샷",
        "Edit Snapshot": "스냅샷 편집",
        "Select folder": "폴더 선택",
        "Select VSCode workspace": "VSCode 워크스페이스 선택",
        "Workspace placeholder": "선택: .code-workspace 파일 (VSCode 복원 시 사용)",
        "Select Workspace": "워크스페이스 선택",
        "Title placeholder": "제목 (비워도 자동 생성)",
        "Note placeholder": "메모 (선택)",
        "Tags (optional)": "태그 (선택)",
        "Add tag placeholder": "추가 태그 (엔터로 추가)",
        "Next actions (3 required)": "다음 할 일 (3개 필수)",
        "Required TODO": "필수 TODO",
        "Template": "템플릿",
        "Select template": "템플릿 선택",
        "Apply": "적용",
        "Suggest Title": "제목 추천",
        "Save Snapshot": "스냅샷 저장",
        "Cancel": "취소",
        "Root invalid": "Root 폴더가 유효하지 않습니다.",
        "Todos required": "TODO 3개를 모두 입력해야 저장됩니다.",
        "Restore preview": "복원 미리보기",
        "Restore hint": "아래 항목이 실행됩니다. 확인 후 복원(Restore)을 누르세요.",
        "Open folder": "탐색기 열기",
        "Open terminal": "터미널 열기 (Root 경로)",
        "Open VSCode": "VSCode 열기",
        "Open running apps": "실행 중이던 앱 복원",
        "Running apps to restore": "복원할 실행 중인 앱",
        "Restore": "복원",
        "Checklist": "체크리스트",
        "Post-restore checklist": "복원 후 체크리스트",
        "OK": "확인",
        "Restore History": "복원 기록",
        "Close": "닫기",
        "Compare Snapshots": "스냅샷 비교",
        "Compare two snapshots": "두 스냅샷 비교",
        "Compare": "비교",
        "Need at least two snapshots to compare": "비교하려면 최소 2개의 스냅샷이 필요합니다.",
        "Settings": "설정",
        "General": "일반",
        "Default Root": "기본 경로",
        "Browse": "찾아보기",
        "Snapshot Retention": "스냅샷 보관 설정",
        "Keep max snapshots (0=unlimited)": "최대 스냅샷 보관 개수 (0=무제한)",
        "Auto-snapshot": "자동 스냅샷",
        "Interval (minutes, 0=disabled)": "간격 (분, 0=사용안함)",
        "Trigger on Git commit": "Git 커밋 시 자동 저장",
        "Global Hotkey": "전역 단축키",
        "Enable Hotkey": "단축키 사용",
        "Recent Files Scan": "최근 파일 스캔 설정",
        "Scan limit": "스캔 개수 제한",
        "Exclude dirs (comma-separated)": "제외할 폴더 (쉼표로 구분)",
        "Restore Defaults": "복원 기본값 설정",
        "Open folder on restore": "복원 시 탐색기 열기",
        "Open terminal on restore": "복원 시 터미널 열기",
        "Open VSCode on restore": "복원 시 VSCode 열기",
        "Restore apps on restore": "복원 시 앱 실행하기",
        "Process Keywords": "프로세스 키워드",
        "Keywords to identify running apps (comma-separated)": "실행 중인 앱 식별 키워드 (쉼표로 구분)",
        "Save": "저장",
        "Onboarding": "시작하기",
        "Welcome to CtxSnap": "CtxSnap에 오신 것을 환영합니다",
        "Onboarding header": "작업 컨텍스트를 ‘저장하고’, 다시 ‘복원’하는 가장 빠른 방법",
        "Onboarding p1 title": "1) 저장 (Snapshot)",
        "Onboarding p1 body": "<p><b>Snapshot</b>은 ‘지금 작업 상태’를 저장합니다.</p><ul><li><b>New Snapshot</b>: 제목/메모/태그/TODO를 작성하고 저장</li><li><b>Quick Snapshot</b>: 빠르게 저장 (기본 단축키: <b>Ctrl+Alt+S</b>)</li></ul><p>저장 시 <b>TODO 3개</b>를 필수로 입력하면, 복원했을 때 “뭘 해야 하지?”가 사라져요.</p>",
        "Onboarding p2 title": "2) 복원 (Restore)",
        "Onboarding p2 body": "<p><b>Restore</b>는 저장된 컨텍스트를 다시 열어줍니다.</p><ul><li>기본 옵션: 폴더 / 터미널 / VSCode</li><li>복원은 기본적으로 <b>미리보기(Preview)</b>에서 체크 후 실행됩니다.</li></ul><p>VSCode는 <code>code</code> 명령이 PATH에 있어야 자동으로 열 수 있어요.</p>",
        "Onboarding p3 title": "3) 태그 & 핀 (Tags & Pin)",
        "Onboarding p3 body": "<p>스냅샷을 <b>업무/개인/부동산/정산</b>처럼 태그로 분류해두면 검색이 훨씬 빨라집니다.</p><ul><li><b>Tag filter</b>로 원하는 컨텍스트만 보기</li><li><b>Pin</b>으로 중요한 스냅샷을 항상 위로 고정</li></ul>",
        "Onboarding p4 title": "4) 설정 & 백업",
        "Onboarding p4 body": "<p><b>Settings</b>에서 아래를 조정할 수 있어요.</p><ul><li>전역 단축키 변경 (Ctrl/Alt/Shift/Key)</li><li>복원 기본 옵션 (폴더/터미널/VSCode)</li><li>최근 파일 개수</li><li>Preview 기본값</li><li><b>설정 내보내기/가져오기</b> (PC 교체/재설치 대비)</li></ul><p>트레이(작업표시줄)에서도 Quick Snapshot / Restore Last가 가능합니다.</p>",
        "Got it": "확인했습니다",
        "Back": "이전",
        "Next": "다음",
        "Finish": "완료",
        "Quick Information": "빠른 정보",
        "Delete": "삭제",
        "Edit": "편집",
        "Toggle Pin": "고정 토글",
        "Archive/Unarchive": "보관/보관 해제",
        "View History": "기록 보기",
        "Export Backup": "백업 내보내기",
        "Import Backup": "백업 가져오기",
        "Quick Snapshot": "빠른 스냅샷",
        "Restore Last": "최근 항목 복원",
        "Open App Folder": "앱 폴더 열기",
        "Show/Hide": "보이기/숨기기",
        "Quit": "종료",
        "Confirm Delete": "삭제 확인",
        "Are you sure you want to delete this snapshot?": "이 스냅샷을 삭제하시겠습니까?",
        "Snapshot Created": "스냅샷이 생성되었습니다",
        "Snapshot Restored": "스냅샷이 복원되었습니다",
        "Deleted": "삭제되었습니다.",
        "Hotkey disabled": "단축키가 비활성화되었습니다.",
        "Hotkey enabled": "단축키 활성화됨",
        "Hotkey failed": "단축키 등록 실패 (이미 사용 중일 수 있음).",
        "Hotkey conflict": "단축키 충돌",
        "Hotkey conflict msg": "전역 단축키를 등록할 수 없습니다 (다른 앱 사용 중).",
        "Hotkey conflict info": "다른 키를 시도하거나 기능을 끌 수 있습니다.",
        "Try alternatives": "다른 키 시도",
        "Disable hotkey": "단축키 끄기",
        "Keep as is": "그대로 유지",
        "Confirm Restore": "복원 확인",
        "Current workspace is not clean (git changes). Restore anyway?": "현재 작업 공간에 변경사항(Git)이 있습니다. 그래도 복원하시겠습니까?",
        "Search placeholder": "제목, 태그, 경로 검색... (Ctrl+F)",
        "No snapshots found": "스냅샷이 없습니다.",
        "Create your first snapshot!": "첫 번째 스냅샷을 만들어보세요!",
        "Untitled": "제목 없음",
        "Language": "언어",
        "Language (Requires Restart)": "언어 (재시작 필요)",
        "System Default": "시스템 기본값",
        "File": "파일",
        "Tools": "도구",
        "Help": "도움말",
        "About": "정보",
        "About CtxSnap": "CtxSnap 정보",
        "About content": "CtxSnap\n\n작업 컨텍스트 스냅샷 도구 (Windows)\n- 스냅샷 저장/복원\n- 태그/핀 필터\n- 전역 단축키\n- 설정 내보내기/가져오기\n",
        "Export Selected Snapshot": "선택한 스냅샷 내보내기...",
        "Export Weekly Report": "주간 보고서 내보내기...",
        "Open Restore History": "복원 기록 열기",
        "Pin / Unpin": "고정 / 고정 해제",
        "Open Root Folder": "루트 폴더 열기",
        "Open in VSCode": "VSCode에서 열기",
        "More": "더보기",
        "Overview": "요약",
        "Recent files": "최근 파일",
        "Processes": "프로세스",
        "Running apps": "실행 중 앱",
        "Recent files tab hint": "팁: 더블 클릭으로 파일을 열 수 있습니다. 우클릭으로 더 많은 작업을 할 수 있습니다.",
        "Clear": "지우기",
        "Tags": "태그",
        "All tags": "전체 태그",
        "Copied": "복사되었습니다.",
        "Copy title": "제목 복사",
        "Copy root path": "루트 경로 복사",
        "Copy TODOs": "TODO 복사",
        "TODOs": "TODO",
        "Path": "경로",
        "Copy path": "경로 복사",
        "Open file": "파일 열기",
        "Open file failed": "열기 실패",
        "Open containing folder": "파일 위치 열기",
        "File not found": "파일을 찾을 수 없습니다",
        "Prev": "이전",
        "No snapshot selected": "선택된 스냅샷 없음",
        "Select a snapshot to see details.": "스냅샷을 선택하여 상세 내용을 확인하세요.",
        "Storage:": "저장소:",
        "Still running in tray title": "CtxSnap",
        "Still running in tray msg": "시스템 트레이에서 계속 실행 중입니다. 트레이 아이콘에서 표시/숨김 또는 종료할 수 있습니다.",
        "Snapshot saved": "스냅샷 저장됨",
        "Pinned.": "고정되었습니다.",
        "Unpinned.": "고정이 해제되었습니다.",
        "Archived.": "보관되었습니다.",
        "Unarchived.": "보관이 해제되었습니다.",
        "Settings applied.": "설정이 적용되었습니다.",
        "Auto backup created": "자동 백업 생성됨",
        "Hotkey updated to": "단축키 변경됨:",
        "All time": "전체 기간",
        "Last 1 day": "최근 1일",
        "Last 3 days": "최근 3일",
        "Last 7 days": "최근 7일",
        "Last 30 days": "최근 30일",
        "Newest": "최신순",
        "Oldest": "오래된순",
        "Pinned first": "고정 항목 우선",
        "Title": "제목순",
        "Pinned only": "고정 항목만",
        "Show archived": "보관된 항목 보기",
        "Wait 2s": "2초 대기",
        "Wait 1s": "1초 대기",
        "Tips": "팁",
        "Hotkey Hint": "추천: <b>Ctrl+Alt+S</b> (Quick Snapshot) — 언제든지 작업 상태를 저장할 수 있어요.",
        "Restore Preview Hint": "복원은 <b>미리보기</b>에서 체크 후 실행됩니다. 필요 없으면 미리보기 기본값을 끌 수 있어요.",
        "Recent Files Hint": "최근 파일 목록은 ‘어디까지 했지?’를 빠르게 떠올리게 해줍니다. 너무 크면 속도가 느려질 수 있어요.",
        "Privacy Hint": "스냅샷에는 파일 경로, 프로세스, 실행 앱 정보가 저장될 수 있습니다. 필요한 항목만 캡처하세요.",
        "Tags Hint": "태그는 ‘업무/개인/부동산/정산’처럼 컨텍스트를 나누는 핵심 기능입니다.",
        "Backup Hint": "설정/태그/단축키는 물론, 원하면 스냅샷(핀/태그 포함)까지 한 파일로 백업할 수 있어요.\n가져오기는 '바로 적용' 또는 '대화상자에만 반영'을 선택할 수 있습니다.",
        "Import Dialog Title": "가져오기",
        "Import Dialog Text": "백업을 불러왔습니다. 지금 바로 적용할까요?",
        "Import Dialog Info": "Apply now: 저장 후 즉시 UI/단축키/태그에 반영합니다.\nKeep: 설정 창에서 검토 후 Save로 적용합니다.",
        "Apply now": "지금 적용",
        "Keep in dialog": "다이얼로그 유지",
        "Reset to defaults": "기본값으로 초기화",
        "Reset to defaults msg": "기본값으로 초기화되었습니다.",
        "Export failed": "내보내기 실패",
        "Import failed": "가져오기 실패",
        "Validation Error": "유효성 검사 오류",
        "Hotkey selection err": "단축키를 켜려면 Ctrl/Alt/Shift 중 최소 1개를 선택하세요.",
        "Onboarding...": "사용 가이드...",
        "Snapshot exported": "스냅샷 내보내기 완료.",
        "Weekly report exported": "주간 보고서 내보내기 완료.",
        "No restore history yet": "복원 기록이 없습니다.",
        "Snapshot file missing": "스냅샷 파일을 찾을 수 없습니다.",
        "Restore failed for some items:": "일부 항목 복원 실패:",
        "Recent files updated in background.": "최근 파일이 백그라운드에서 업데이트되었습니다.",
        "Warning": "경고",
        "Error": "오류",
        "Information": "알림",
        "Snapshot Updated": "스냅샷이 수정되었습니다",
        "Failed to restore some apps": "일부 앱을 다시 실행하지 못했습니다",
        "Failed to delete snapshot file": "스냅샷 파일 삭제 실패",
        "Imported snapshot warning title": "가져온 스냅샷",
        "Imported snapshot warning msg": "이 스냅샷은 외부에서 가져왔습니다. 앱 복원은 스냅샷에 저장된 실행 명령을 실행할 수 있습니다. 신뢰할 수 있을 때만 진행하세요.",
        "Proceed": "계속",
        "Skipped app restore for imported snapshot": "가져온 스냅샷의 앱 복원을 건너뛰었습니다.",
        "Enforce 3 TODOs": "TODO 3개 필수 입력",
        "Add": "추가",
        "Add / Update": "추가 / 수정",
        "Template TODO": "템플릿 TODO (옵션)",
        "Include patterns for recent file scan": "최근 파일 스캔 포함 패턴 (비워두면 모두)",
        "Exclude patterns for recent file scan": "최근 파일 스캔 제외 패턴",
        "Snapshot list page size": "목록 페이지 당 개수",
        "Auto-archive after": "자동 보관 (일)",
        "Auto backup interval": "자동 백업 간격 (시간)",
        "Skip pinned snapshots when auto-archiving": "자동 보관 시 고정된 항목 제외",
        "Duplicate Snapshot": "중복 스냅샷",
        "Duplicate snapshot warn": "동일한 제목과 경로의 스냅샷이 이미 존재합니다. 그래도 생성하시겠습니까?",
        "Restore open folder failed": "폴더 열기 실패:",
        "Restore open terminal failed": "터미널 열기 실패:",
        "Restore open vscode failed": "VSCode 열기 실패:",
        "Delete snapshot?": "스냅샷 삭제?",
        "Delete confirm msg": "정말 삭제할까요? 스냅샷 파일도 함께 삭제됩니다.",
        "VSCode not found title": "VSCode 찾을 수 없음",
        "VSCode command missing": "'code' 명령을 찾을 수 없습니다. VSCode에서 Command Palette -> 'Shell Command: Install code command in PATH'를 실행해보세요.",
        "Settings Hint": "단축키, 복원 동작, 태그를 한 곳에서 관리합니다. 내보내기/가져오기도 지원합니다.",
        "Show post-restore checklist": "복원 후 체크리스트 표시",
        "Show restore preview by default": "기본으로 복원 미리보기 표시",
        "Backup / Restore": "백업 / 복원",
        "Include settings": "설정 포함",
        "Include index": "인덱스 포함 (목록/고정/태그)",
        "Include snapshots": "스냅샷 데이터 포함 (전체 JSON)",
        "Export options group": "내보내기 옵션",
        "Import Params": "백업을 불러왔습니다. 지금 바로 적용할까요?",
        "Import Info": "Apply now: 저장 후 즉시 UI/단축키/태그에 반영합니다.\nKeep: 설정 창에서 검토 후 Save로 적용합니다.",
        "Exported": "내보내기 완료: ",
        "Imported+Applied": "가져오기 및 적용 완료: ",
        "Imported into dialog": "대화상자로 가져옴: ",
        "Reset to defaults done": "기본값으로 초기화되었습니다.",
        "suffix_files": "개",
        "suffix_sec": "초",
        "suffix_per_page": "개씩",
        "suffix_min": "분",
        "suffix_days": "일",
        "suffix_hours": "시간",
        "Root": "루트",
        "Workspace": "워크스페이스",
        "Note": "메모",
        "Restore Options": "복원 옵션",
        "Checklist hint": "완료한 항목을 체크하세요.",
        "Done": "완료",
        "Snapshot details": "스냅샷 상세",
        "Select a restore entry to view details.": "복원 항목을 선택하여 상세 내용을 확인하세요.",
        "Check off completed items": "완료한 항목을 확인하세요",
        "Capture recent files": "최근 파일 캡처",
        "Capture running processes": "실행 중인 프로세스 캡처",
        "Capture note": "메모 캡처",
        "Capture TODOs": "TODO 캡처",
        "Capture Options": "캡처 옵션",
        "Files to collect": "수집할 파일 수",
        "Scan timeout": "스캔 시간 제한",
        "Automation": "자동화",
        "Archive & Backup": "보관 및 백업",
        "Root folder": "루트 폴더",
        "Suggest title": "제목 자동 추천",
        "TODOs required": "TODO 3개를 모두 입력해야 합니다.",
    }

}

CURRENT_LANG = "en"

def get_system_lang() -> str:
    try:
        lang, _ = locale.getdefaultlocale()
        if lang and lang.lower().startswith("ko"):
            return "ko"
    except Exception:
        pass
    return "en"

def set_language(lang_code: Optional[str]) -> None:
    global CURRENT_LANG
    if not lang_code or lang_code == "auto":
        CURRENT_LANG = get_system_lang()
    else:
        CURRENT_LANG = lang_code

def tr(key: str) -> str:
    return TRANSLATIONS.get(CURRENT_LANG, {}).get(key, TRANSLATIONS["en"].get(key, key))
