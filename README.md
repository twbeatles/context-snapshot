# CtxSnap (Windows)

> English version: [README.en.md](README.en.md)

**CtxSnap**은 PySide6 기반 **작업 컨텍스트 스냅샷** 도구입니다. 현재 작업 맥락(폴더, 메모, TODO, 최근 파일, 실행 중 프로세스 등)을 한 번에 저장하고, 나중에 빠르게 복원할 수 있습니다.

---

## 📋 목차

1. [왜 필요한가요?](#왜-필요한가요)
2. [주요 기능](#주요-기능)
3. [설치 방법](#설치-방법)
4. [사용 방법](#사용-방법)
5. [상세 기능 가이드](#상세-기능-가이드)
6. [설정 옵션](#설정-옵션)
7. [데이터 저장 위치](#데이터-저장-위치)
8. [개발자 가이드](#개발자-가이드)
9. [문제 해결](#문제-해결)
10. [향후 계획](#향후-계획)

---

## 왜 필요한가요?

- 🔄 **"어디까지 했지?"** 반복되는 맥락 전환 비용을 줄입니다
- ✅ **TODO 3개 필수** 입력으로 **다음 행동**을 분명히 남깁니다
- 🚀 **복원 시** 폴더/터미널/VSCode를 한 번에 열어 흐름을 빠르게 되살립니다

---

## 주요 기능

| 기능 | 설명 |
|------|------|
| **글로벌 핫키** | 기본 `Ctrl + Alt + S`로 어디서든 빠른 스냅샷 |
| **TODO 3개 필수** | 다음에 할 일 3개를 반드시 기록 |
| **복원 미리보기** | 복원 전 내용 확인 후 실행 |
| **시스템 트레이** | 백그라운드 상주, 빠른 접근 메뉴 |
| **VSCode 연동** | 스냅샷으로 VSCode 프로젝트 열기 |
| **Git 연동** | 브랜치 + 커밋 정보로 제목 자동 추천 |
| **태그/고정** | 업무/개인 등 분류 및 중요 스냅샷 고정 |
| **통합 검색** | 제목/메모/TODO/파일/프로세스까지 검색 |
| **자동 스냅샷** | 주기적 또는 Git 변경 감지 시 자동 저장 |
| **템플릿** | 자주 쓰는 설정 템플릿 저장 |
| **스냅샷 비교** | 두 스냅샷의 차이점 비교 |
| **백업/복원** | 설정 및 스냅샷 데이터 백업 |
| **복원 기록** | 최근 복원한 스냅샷 이력 확인 및 재실행 |
| **다국어 지원** | 한국어/영어 지원 (시스템 언어 자동 감지) |
| **온보딩** | 첫 실행 시 기능 가이드 제공 |

---

## 설치 방법

### 방법 1: 설치 프로그램 사용 (권장)

1. [Releases](https://github.com/your-repo/ctxsnap/releases)에서 `CtxSnap_Setup.exe` 다운로드
2. 설치 프로그램 실행
3. 설치 완료 후 시작 메뉴에서 **CtxSnap** 실행

### 방법 2: 포터블 실행

1. [Releases](https://github.com/your-repo/ctxsnap/releases)에서 `CtxSnap.zip` 다운로드
2. 압축 해제 후 `CtxSnap.exe` 실행

### 방법 3: 소스에서 실행

```bash
# 저장소 클론
git clone https://github.com/your-repo/ctxsnap.git
cd ctxsnap

# 의존성 설치
pip install -r requirements.txt

# 실행
python ctxsnap_win.py
```

---

## 사용 방법

### 🚀 빠른 시작

#### 1. 첫 스냅샷 생성하기

1. **CtxSnap** 실행
2. **+ 새 스냅샷** 버튼 클릭 (또는 `Ctrl + Alt + S`)
3. 작업 정보 입력:
   - **제목**: 현재 작업 상태를 나타내는 제목
   - **루트 폴더**: 작업 중인 프로젝트 폴더 선택
   - **메모**: 현재 상태에 대한 간단한 메모
   - **TODO 3개**: 다음에 할 일 3가지 (필수!)
   - **태그**: 분류용 태그 선택
4. **저장** 버튼 클릭

#### 2. 스냅샷 복원하기

1. 목록에서 복원할 스냅샷 선택
2. **복원** 버튼 클릭
3. 복원 옵션 확인 (미리보기 모드 시):
   - ✅ 폴더 열기
   - ✅ 터미널 열기
   - ✅ VSCode 열기
   - ⬜ 실행 중이던 앱 복원 (기본값 꺼짐)
4. **복원 실행** 클릭

#### 3. 글로벌 핫키 사용

- **어느 앱에서든** `Ctrl + Alt + S` 누르면 빠른 스냅샷 다이얼로그 표시
- 직전 스냅샷의 루트 폴더와 태그를 기본값으로 사용

---

### 📊 UI 구성

```
┌────────────────────────────────────────────────────────────┐
│ CtxSnap                                        [─] [□] [×] │
├────────────────────────────────────────────────────────────┤
│  🔍 검색...                    [태그 ▼] [정렬 ▼] [+ 새 스냅샷] │
├─────────────────────────┬──────────────────────────────────┤
│                         │                                  │
│  📁 feature/auth 작업    │  📋 상세 정보                     │
│     2024-01-15 14:30    │                                  │
│     업무, 개발           │  제목: feature/auth 작업           │
│                         │  루트: C:\Projects\my-app        │
│  📁 API 연동 작업        │                                  │
│     2024-01-14 16:22    │  📝 메모                          │
│     업무                 │  로그인 기능 구현 중...            │
│                         │                                  │
│  📁 문서 정리            │  ✅ TODO                          │
│     2024-01-13 09:15    │  1. API 연동 완료                 │
│     개인                 │  2. 테스트 케이스 작성             │
│                         │  3. PR 제출                       │
│  [< 이전] [1/5] [다음 >]  │                                  │
│                         │  📂 최근 파일 (5)                  │
│                         │  • src/auth.py                   │
│                         │  • tests/test_auth.py            │
│                         │                                  │
│                         │  ⚙️ 프로세스 (3)                   │
│                         │  • code.exe                      │
│                         │  • chrome.exe                    │
│                         │                                  │
│                         │  [복원] [편집] [삭제] [비교]        │
└─────────────────────────┴──────────────────────────────────┘
```

---

## 상세 기능 가이드

### 🏷️ 태그 관리

태그를 사용해 스냅샷을 분류하세요.

**기본 제공 태그:**
- 업무
- 개인
- 부동산
- 정산

**사용자 정의 태그 추가:**
1. 설정 → Tags 탭
2. 새 태그 이름 입력
3. **추가** 클릭

**태그로 필터링:**
- 상단의 태그 드롭다운에서 하나 이상 선택
- 선택한 태그를 가진 스냅샷만 표시

---

### 📌 고정(Pin) 기능

중요한 스냅샷을 상단에 고정하세요.

1. 스냅샷 선택
2. 우클릭 → **고정** 또는 상세 패널의 핀 아이콘 클릭
3. 고정된 스냅샷은 목록 상단에 📌 표시와 함께 나타남

---

### 🔍 검색 기능

검색창에서 다양한 정보를 통합 검색합니다:

- **제목**: 스냅샷 제목
- **루트 폴더**: 프로젝트 경로
- **태그**: 태그 이름
- **메모**: 메모 내용
- **TODO**: TODO 항목
- **최근 파일**: 저장된 파일 경로
- **프로세스**: 실행 중이던 프로세스 이름

**검색 팁:**
- 공백으로 여러 키워드 검색 (AND 조건)
- 대소문자 구분 없음

---

### 📋 템플릿 기능

자주 사용하는 설정을 템플릿으로 저장하세요.

**템플릿 생성:**
1. 설정 → Templates 탭
2. **새 템플릿** 클릭
3. 템플릿 이름, 기본 TODO, 태그, 메모 설정
4. **저장**

**템플릿 적용:**
1. 새 스냅샷 생성 다이얼로그에서
2. **템플릿 적용** 드롭다운 선택
3. 원하는 템플릿 선택 → 자동으로 값 채워짐

---

### ⚡ 자동 스냅샷

수동으로 저장하지 않아도 자동으로 스냅샷을 생성합니다.
자동 스냅샷은 확인 다이얼로그 없이 즉시 저장됩니다.

**주기적 자동 스냅샷:**
1. 설정 → General 탭
2. **자동 스냅샷 주기(분)** 설정 (0 = 비활성)
3. 예: `30` 입력 시 30분마다 자동 저장 (무인 저장)

**Git 변경 감지:**
1. 설정 → General 탭
2. **Git 변경 시 자동 스냅샷** 체크
3. Git 상태(브랜치, 커밋 등) 변경 시 자동 저장 (무인 저장)

**중복 자동 저장 방지:**
- 직전 자동 스냅샷과 핵심 맥락(루트/워크스페이스/메모/TODO/태그/Git 상태)이 같으면 저장을 생략합니다.

---

### 🔄 스냅샷 비교

두 스냅샷의 차이점을 비교합니다.

1. 첫 번째 스냅샷 선택
2. `Ctrl` 키를 누른 채 두 번째 스냅샷 선택
3. **비교** 버튼 클릭
4. 비교 결과 표시:
   - 추가된 항목 (녹색)
   - 삭제된 항목 (빨간색)
   - 변경된 항목 (노란색)

---

---

### 📜 복원 기록

과거에 복원했던 스냅샷 이력을 확인하고 다시 실행할 수 있습니다.

1. **메뉴** → **도구** → **복원 기록** (또는 단축키 없음)
2. 최근 복원한 항목 리스트 확인 (날짜, 스냅샷 제목)
3. 항목 더블 클릭 또는 **복원** 버튼으로 즉시 재실행

---

### 👋 온보딩 (시작 가이드)

앱을 처음 사용하는 분들을 위한 가이드 기능입니다.

1. 최초 실행 시 자동으로 표시됩니다.
2. 기능 재확인: **시스템 트레이 아이콘 우클릭** → **Onboarding**
3. 스냅샷 생성, 복원, 태그 관리, 설정 등 4단계 핵심 가이드 제공

---

### 🌐 다국어 지원

한국어와 영어를 지원합니다.

1. **시스템 언어 자동 감지**: 윈도우 설정에 따라 한국어/영어 자동 적용
2. **수동 설정**: 설정(General 탭)에서 언어 변경 가능 (재시작 필요)

---

### 💾 백업 및 복원

설정과 스냅샷 데이터를 백업하세요.

**백업 생성:**
1. 설정 → Backup 탭
2. **백업 내보내기** 클릭
3. 저장 위치 선택
4. 옵션 선택:
   - ✅ 설정 포함
   - ✅ 스냅샷 데이터 포함

**백업에서 복원:**
1. 설정 → Backup 탭
2. **백업 가져오기** 클릭
3. 백업 파일 선택
4. `Apply now`를 선택하면 즉시 반영되고, `Keep in dialog`는 Save 시점에 반영됩니다.

---

### 🖥️ 시스템 트레이

CtxSnap은 시스템 트레이에 상주합니다.

**트레이 메뉴:**
- **Quick Snapshot**: 빠른 스냅샷 생성
- **Restore Last**: 마지막 스냅샷 복원
- **Open App Folder**: 데이터 폴더 열기
- **Settings**: 설정 열기
- **Quit**: 앱 종료

**트레이로 최소화:**
- 창 닫기 버튼(×) 클릭 시 트레이로 최소화
- 완전 종료는 트레이 메뉴 → Quit

---

## 설정 옵션

### General 탭

| 설정 | 설명 | 기본값 |
|------|------|--------|
| 기본 루트 폴더 | 새 스냅샷의 기본 폴더 | `%USERPROFILE%` |
| 최근 파일 개수 | 저장할 최근 파일 수 | `30` |
| 제외 디렉토리 | 스캔에서 제외할 폴더 | `.git, node_modules, __pycache__` |
| 프로세스 키워드 | 저장할 프로세스 필터 | `code, chrome, notion, slack` |
| 자동 스냅샷 주기 | 분 단위, 0=비활성 | `0` |
| Git 변경 감지 | Git 상태 변경 시 자동 저장 | `false` |

### Restore 탭

| 설정 | 설명 | 기본값 |
|------|------|--------|
| 폴더 열기 | 복원 시 루트 폴더 열기 | `true` |
| 터미널 열기 | 복원 시 터미널 열기 | `true` |
| VSCode 열기 | 복원 시 VSCode 열기 | `true` |
| 앱 복원 | 실행 중이던 앱 복원 | `false` |
| 미리보기 | 복원 전 미리보기 표시 | `true` |

### Hotkey 탭

| 설정 | 설명 | 기본값 |
|------|------|--------|
| 핫키 활성화 | 글로벌 핫키 사용 여부 | `true` |
| 조합 키 | Ctrl, Alt, Shift 조합 | `Ctrl + Alt` |
| 메인 키 | 트리거 키 | `S` |

---

## 데이터 저장 위치

모든 데이터는 `%APPDATA%\ctxsnap\`에 저장됩니다.

```
%APPDATA%\ctxsnap\
├── snapshots/              # 개별 스냅샷 JSON 파일
│   ├── 20240115-143022.json
│   ├── 20240114-162235.json
│   └── ...
├── index.json              # 스냅샷 인덱스 (검색용 캐시)
├── settings.json           # 앱 설정
├── restore_history.json    # 복원 기록
└── logs/
    └── ctxsnap.log         # 로그 파일 (로테이팅)
```

**폴더 열기:** 트레이 메뉴 → Open App Folder

---

## 개발자 가이드

### 개발 환경 설정

```bash
# 저장소 클론
git clone https://github.com/your-repo/ctxsnap.git
cd ctxsnap

# 가상 환경 생성 (권장)
python -m venv venv
venv\Scripts\activate

# 의존성 설치
pip install -r requirements.txt

# 개발 모드 실행
python ctxsnap_win.py
```

### EXE 빌드 (PyInstaller)

```bash
# PyInstaller 설치
pip install pyinstaller

# 빌드 실행
python -m PyInstaller ctxsnap_win.spec

# 결과: dist\CtxSnap\CtxSnap.exe
```

### 설치 프로그램 빌드 (Inno Setup)

1. [Inno Setup](https://jrsoftware.org/isinfo.php) 설치
2. EXE 먼저 빌드 (`python -m PyInstaller ctxsnap_win.spec`)
3. Inno Setup Compiler에서 `installer/ctxsnap.iss` 열기
4. 컴파일 → `CtxSnap_Setup.exe` 생성

### 프로젝트 구조

| 파일/폴더 | 설명 |
|-----------|------|
| `ctxsnap_win.py` | 메인 애플리케이션 진입점 |
| `ctxsnap/` | 핵심 패키지 |
| `ctxsnap/core/` | 핵심 로직 (워커, 로깅 등) |
| `ctxsnap/ui/` | UI 컴포넌트 (Dialogs, Widgets) |
| `ctxsnap/ui/dialogs/` | 각종 설정 및 기능 다이얼로그 |
| `ctxsnap/i18n.py` | 다국어 지원 모듈 |
| `ctxsnap/app_storage.py` | 데이터 저장소 관리 |
| `ctxsnap/utils.py` | 유틸리티 함수 |
| `assets/` | 아이콘/이미지 |
| `installer/` | Inno Setup 스크립트 |

---

## 문제 해결

### ❓ VSCode가 열리지 않아요

**원인:** `code` 명령이 PATH에 없음

**해결:**
1. VSCode 실행
2. `Ctrl + Shift + P` → "Shell Command: Install 'code' command in PATH" 실행
3. 터미널 재시작

---

### ❓ 파일 스캔이 너무 느려요

**원인:** 대용량 프로젝트 폴더

**해결:**
1. 설정 → General 탭
2. **최근 파일 개수** 줄이기 (예: 30 → 15)
3. **제외 디렉토리**에 `node_modules`, `dist`, `build` 등 추가

---

### ❓ 핫키가 작동하지 않아요

**원인:** 다른 앱이 같은 핫키 사용 또는 핫키 비활성화

**해결:**
1. 설정 → Hotkey 탭
2. **핫키 활성화** 체크 확인
3. 다른 조합으로 변경 (예: `Ctrl + Alt + Q`)

---

### ❓ 스냅샷 데이터를 완전히 삭제하고 싶어요

**해결:**
1. 설정 → Backup 탭
2. **Restore Defaults**는 설정값만 기본값으로 되돌립니다.
3. 스냅샷 포함 전체 삭제는 `%APPDATA%\ctxsnap` 폴더를 직접 삭제하세요.

---

### ❓ 로그 파일은 어디에 있나요?

**위치:** `%APPDATA%\ctxsnap\logs\ctxsnap.log`

문제 발생 시 이 파일을 첨부해 이슈를 생성해 주세요.

---

## 향후 계획

### 🔜 예정된 기능

- [ ] 크로스 플랫폼 지원 (macOS, Linux)
- [ ] 팀 협업 기능 (스냅샷 공유)
- [ ] 클라우드 동기화
- [ ] Slack/Notion 연동
- [ ] 스냅샷 암호화

### 💡 기능 제안

새로운 기능 아이디어가 있다면 [Issues](https://github.com/your-repo/ctxsnap/issues)에 제안해 주세요!

---

## 라이선스

MIT License

---

## 기여하기

1. Fork
2. Feature 브랜치 생성 (`git checkout -b feature/amazing-feature`)
3. 커밋 (`git commit -m 'Add amazing feature'`)
4. Push (`git push origin feature/amazing-feature`)
5. Pull Request 생성

---

**Made with ❤️ for productivity lovers**
